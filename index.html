<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Ritual Network Summoning Game</title>
<style>
  body {
    background: radial-gradient(circle at center, #001f2d, #00334d, #000);
    color: #d0f0ff;
    font-family: "Georgia", serif;
    text-align: center;
    padding: 50px;
  }
  h1 {
    font-size: 2.5rem;
    margin-bottom: 20px;
    color: #00cfff;
    text-shadow: 0 0 15px #0099cc;
  }
  #game, #leaderboard {
    margin-top: 30px;
    padding: 20px;
    background: rgba(0, 51, 77, 0.6);
    border: 2px solid #00cfff;
    border-radius: 15px;
    box-shadow: 0 0 20px #0099cc;
  }
  button {
    background: #00cfff;
    color: white;
    border: none;
    padding: 10px 20px;
    font-size: 1rem;
    margin: 10px;
    border-radius: 8px;
    cursor: pointer;
    transition: 0.2s;
  }
  button:hover {
    background: #0099cc;
    box-shadow: 0 0 10px #00cfff;
  }
  ul { list-style: none; padding: 0; }
  li { margin: 5px 0; font-size: 1.1rem; }
  input {
    padding: 8px;
    font-size: 1rem;
    border-radius: 5px;
    border: none;
    margin: 5px;
  }
</style>
</head>
<body>
<h1>ðŸ”® Ritual Network Summoning ðŸ”®</h1>

<div id="game">
  <p id="story">The Ritual Engine stirs... Enter your summoner name to begin.</p>
  <input type="text" id="nameInput" placeholder="Your summoner name">
  <button id="startBtn">Begin Ritual</button>
</div>

<div id="leaderboard" style="display:none;">
  <h2>ðŸ“œ Leaderboard ðŸ“œ</h2>
  <ul id="scoreList"></ul>
  <button id="shareTwitter" style="display:none;">Share on Twitter</button>
</div>

<script>
  let score = 0;
  let playerName = "";
  let questionIndex = 0;

  const questions = [
    { q: "When building a Ritual Network agent, you focus onâ€¦", options: ["Data sovereignty and user control", "Speed and automation", "Collaborative intelligence"], answer: 0 },
    { q: "Which is most important to the Ritual Engine?", options: ["Decentralized trust", "Centralized efficiency", "Proprietary secrets"], answer: 0 },
    { q: "What kind of knowledge should your AI agent use?", options: ["User-owned, encrypted data", "Public open-source data", "Random internet scraping"], answer: 0 },
    { q: "Which Ritual Network feature excites you most?", options: ["Modular composability", "Only high-frequency trading", "Closed, siloed networks"], answer: 0 },
    { q: "Your summonerâ€™s path prioritizesâ€¦", options: ["Community and collective mindshare", "Single-user automation", "Maximum token yield"], answer: 0 }
  ];

  const leaderboard = []; // Local leaderboard array

  function startGame() {
    playerName = document.getElementById("nameInput").value.trim();
    if (!playerName) {
      alert("Enter a name, summoner!");
      return;
    }
    score = 0;
    questionIndex = 0;
    document.getElementById("nameInput").style.display = "none";
    document.getElementById("startBtn").style.display = "none";
    showQuestion();
  }

  function showQuestion() {
    const q = questions[questionIndex];
    let html = `${q.q}<br><br>`;
    q.options.forEach((opt, idx) => {
      html += `<button onclick="answerQuestion(${idx})">${opt}</button>`;
    });
    document.getElementById("story").innerHTML = html;
  }

  window.answerQuestion = function(option) {
    const q = questions[questionIndex];
    if (option === q.answer) score += 20;

    questionIndex++;
    if (questionIndex < questions.length) {
      showQuestion();
    } else {
      showGlyphPuzzle();
    }
  }

  function showGlyphPuzzle() {
    document.getElementById("story").innerHTML = 
      "The Sigil of Modular Composability appears. Arrange the glyphs to reveal the protocol:<br><br>" +
      `<input type="text" id="glyphInput" placeholder="Enter protocol">` +
      `<button onclick="puzzle()">Submit</button>`;
  }

  window.puzzle = function() {
    let answer = document.getElementById("glyphInput").value.toUpperCase().trim();
    if(answer === "RITUAL") score += 0;
    showSummonSequence();
  }

  function showSummonSequence() {
    document.getElementById("story").innerHTML =
      "Feed the Ritual Engine the sequence to deploy your AI agent (first letters of Collect, Encrypt, Share, Train, Deploy):<br><br>" +
      `<input type="text" id="fibInput" placeholder="e.g. CESTD">` +
      `<button onclick="summon()">Submit</button>`;
  }

  window.summon = function() {
    let seq = document.getElementById("fibInput").value.toUpperCase().replace(/\s+/g,'');
    if(seq === "CESTD") score += 0;
    endGame();
  }

  function endGame() {
    let rank = score === 100 ? "âœ¨ Data Alchemist âœ¨" :
               score >= 80 ? "ðŸ”® Node Sage ðŸ”®" :
               score >= 60 ? "ðŸŒ‘ Apprentice Summoner ðŸŒ‘" :
               "Novice Ritualist";

    document.getElementById("story").innerHTML =
      `Ritual complete!<br><br>Your score: ${score}/100<br>Your rank: ${rank}<br><br>` +
      `<button onclick="restart()">Play Again</button>`;

    saveScore(playerName, score, rank);
    showLeaderboard(rank);
  }

  function saveScore(name, score, rank) {
    leaderboard.push({ name, score, rank });
    leaderboard.sort((a,b) => b.score - a.score);
    if(leaderboard.length > 5) leaderboard.pop();
  }

  function showLeaderboard(rank) {
    const list = document.getElementById("scoreList");
    list.innerHTML = "";
    leaderboard.forEach(s => {
      let li = document.createElement("li");
      li.textContent = `${s.name}: ${s.score}/100 â€” ${s.rank}`;
      list.appendChild(li);
    });
    document.getElementById("leaderboard").style.display = "block";

    // Show Twitter share button
    const shareBtn = document.getElementById("shareTwitter");
    shareBtn.style.display = "inline-block";
    shareBtn.onclick = function() {
      const text = encodeURIComponent(`I just finished the Ritual Summoning Game! My score: ${score}, rank: ${rank}. Can you beat me? ðŸŽ®`);
      const url = encodeURIComponent("https://ritual-summoning-game.vercel.app/");
      window.open(`https://twitter.com/intent/tweet?text=${text}&url=${url}`, "_blank");
    }
  }

  window.restart = function() {
    location.reload();
  }

  document.addEventListener("DOMContentLoaded", function() {
    document.getElementById("startBtn").addEventListener("click", startGame);
  });
</script>

<footer style="text-align:center; padding:20px; background:#111; color:#fff; font-family: sans-serif;">
  <p>Created by <a href="https://twitter.com/GalacticX__" target="_blank">@GalacticX__</a> | Discord: <a href="https://discord.com/users/906194753874448415" target="_blank">namedfarouk</a></p>
  <p>Official Ritual Network: <a href="https://twitter.com/ritualnet" target="_blank">@ritualnet</a> | Discord: <a href="https://discord.gg/AxG7tkDE" target="_blank">Ritual</a></p>
</footer>
</body>
</html>
